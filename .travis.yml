dist: trusty
sudo: required
language: go
services:
  - docker
go:
  - 1.12.x
env:
  - GOMAXPROCS=4 GO111MODULE=on
install:
  - go get golang.org/x/crypto/pkcs12
  - go get github.com/pkg/errors
  - go get github.com/hashicorp/terraform@v0.12.19
  - go mod tidy
  - go mod vendor
script:
  - make dist
before_deploy:
  - export TRAVIS_TAG="v3.0.4.1"
  - git tag $TRAVIS_TAG
deploy:
  provider: releases
  draft: true
  overwrite: false
  api_key:
    secure: DzBSKJfGi7BI6NI5WSqrLIRZIxoGUAYKqSLg0mAf3Num+4HAStGnMfvAOIMtpK4j0xCkrXMEFkP6Iu9Rti2U75biF/K8khzkZ909AKa67r1uIWfjEhkoKMUEoid6xBjSc0iJsK7H1syVQcAt30LYcJOh1koV6bxUvV1AL66SlUyiY924NmMXcruyg8t2XinoYgyTETMsGAjQlZDBV07ahKmQZU/cWAJsYJNOeTrtXAzq+RMwJqBQtYhki7bR838HsBxZ0V8NqEUOAPnXKQcjHEALn2Vrrw7PFhLAvsGMjZSVBC0wV0YavfX6/nk+48r9zbGPNOA1TipJtf3+x54adpwB+wAkfHyQeo8mreE4smySMGE84nOcKJvEuOQLWt7RwCHsXj+Raq2XnhwXT5mZErRYapclF43Hnx/+mtDI69LUGtI4/jiV/xjo4Xkq9ERuEl22aZYYzonGoUyJ8SFTbI7QPy28FtSOCSfxTxrsa4nQiX9UUZe1dE52BRFbyq3cGbJAM8PezVDf5627p8yhKY8gDafE/fgFh40YeN891J8K4qBpOOTYJSlExJL85XJqHGVFd0UmbERPwEvlyVkROw9sppvzObzZPV2c+fZNVeadD/MjIApUvSNB7vtx4J6LCjhONZjL3YgWFuFx3OOWm5ZxIU907JaVdlXzSNCZJzU=
  file_glob: true
  file: _bin/terraform-provider-ddcloud.*.zip
  on:
    repo: hhakkaev/dd-cloud-compute-terraform
    branch: development\/v3.0
  skip_cleanup: 'true'
